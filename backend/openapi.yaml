openapi: 3.1.0
info:
  title: GPT Backend Services API
  description: API für Pinterest Templates, ZIP-Bundles und Langzeitgedächtnis.
  version: 1.0.0
servers:
  - url: https://backend-dyai2025s-projects.vercel.app
paths:
  /health:
    get:
      operationId: checkHealth
      summary: Health Check
  /templates:
    get:
      operationId: listTemplates
      summary: Verfügbare Templates auflisten
  /templates/render:
    post:
      operationId: renderTemplate
      summary: Template rendern (HTML/Visual)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [templateId, data]
              properties:
                templateId:
                  type: string
                  description: ID wie 'pinterest-quote', 'pinterest-story', 'pinterest-tips'
                data:
                  type: object
                  description: Json mit Inhalten (title, quote, colors, etc.)
  /zip-bundles:
    post:
      operationId: createZipBundle
      summary: ZIP Datei erstellen
      description: Erstellt ein ZIP-Archiv aus Textinhalten und gibt es als Download zurück.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [files]
              properties:
                filename:
                  type: string
                  description: Name der Download-Datei (z.B. "social-media-pack.zip")
                files:
                  type: array
                  items:
                    type: object
                    required: [path, content]
                    properties:
                      path:
                        type: string
                        description: Dateiname im ZIP (z.B. "pin1.html")
                      content:
                        type: string
                        description: Textinhalt der Datei (HTML code, CSV, Text)
      responses:
        '200':
          description: ZIP Datei Download (Binary)
          content:
            application/zip:
              schema:
                type: string
                format: binary
  /memory/query:
    post:
      operationId: queryMemory
      summary: Erinnerungen abrufen
      description: Suche nach gespeicherten Marken-Infos oder vergangenen Posts.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId]
              properties:
                userId:
                  type: string
                  description: Die OpenAI User ID (vom System bereitgestellt)
                search:
                  type: string
                  description: Suchbegriff (z.B. "Brand Guidelines", "Last Post")
                memoryKey:
                  type: string
                  description: Exakter Key falls bekannt (z.B. "brand_colors")
  /memory/upsert:
    post:
      operationId: upsertMemory
      summary: Wissen speichern
      description: Speichere Marken-Farben, Stile oder Post-Historie dauerhaft.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId, memoryKey, content]
              properties:
                userId:
                  type: string
                memoryKey:
                  type: string
                  description: Eindeutiger Name (z.B. "brand_colors")
                content:
                  type: object
                  description: Die Daten als JSON Objekt
  /canva/convert:
    post:
      operationId: convertCanvaSpec
      summary: Canva Spec zu SVG/PDF konvertieren
      description: Wandelt ein JSON-Layout in eine Vektordatei oder PDF um.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [spec]
              properties:
                spec:
                  type: object
                  description: Das canva_spec.json Objekt
                output:
                  type: string
                  enum: [svg, pdf]
                  default: svg
      responses:
        '200':
          description: Die generierte Datei (Binary)
          content:
            application/pdf:
              schema:
                type: string
                format: binary
            image/svg+xml:
              schema:
                type: string
                format: binary
  /canva/preview:
    post:
      operationId: previewCanvaSpec
      summary: HTML Vorschau generieren
      description: Erzeugt eine vollständige HTML-Seite mit dem Design als Vorschau.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [spec]
              properties:
                spec:
                  type: object
                theme:
                  type: string
                  enum: [light, dark]
                  default: light
      responses:
        '200':
          description: HTML Code der Vorschau
          content:
            text/html:
              schema:
                type: string
